{"version":3,"file":"chat-window.js","sources":["pages/message/chat-window.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzc2FnZS9jaGF0LXdpbmRvdy52dWU"],"sourcesContent":["<template>\r\n  <view class=\"chat-window\">\r\n    <!-- 标题栏 -->\r\n    <view class=\"header\" :style=\"{paddingTop:safeAreaInsets?.top + 'px'}\">\r\n      <view class=\"icon-back\" @click=\"goBack\">\r\n        <uni-icons type=\"left\" size=\"24\" color=\"gray\"></uni-icons>\r\n      </view>\r\n      <text class=\"friend-name\">{{ friend.name }}</text>\r\n    </view>\r\n\r\n    <!-- 消息列表 -->\r\n    <scroll-view class=\"message-list\" scroll-y>\r\n      <view v-for=\"(msg, index) in messages\" :key=\"msg.id\" class=\"message-item\">\r\n        <!-- 对方消息 -->\r\n        <view v-if=\"!msg.isSelf\" class=\"message-friend\">\r\n          <image class=\"avatar-friend\" :src=\"friend.avatar\" mode=\"aspectFill\"></image>\r\n          <view class=\"message-content-friend-text\">\r\n            {{msg.content}}\r\n          </view>\r\n        </view>\r\n\r\n\r\n        <!-- 自己消息 -->\r\n        <view v-else class=\"message-self\">\r\n          <image class=\"avatar-self\" :src=\"self.avatar\" mode=\"aspectFill\"></image>\r\n          <view class=\"message-content-self-text\">{{msg.content}}</view>\r\n        </view>\r\n    </view>\r\n        <!-- 占位元素，用于滚动到底部 -->\r\n        <view id=\"last-msg-item\" style=\"height: 1px;\"></view>\r\n    </scroll-view>\r\n\r\n    <!-- 输入框 -->\r\n    <view class=\"input-container\">\r\n      <textarea class=\"input-box\" v-model=\"messageToSend\" placeholder=\"请输入内容\" @focus=\"onFocus\" @blur=\"onBlur\"\r\n        @confirm=\"onComfirm\"></textarea>\r\n      <button class=\"send\" v-if=\"toggle\">\r\n        发送\r\n      </button>\r\n      <template v-else>\r\n        <uni-icons class=\"emoji\" type=\"fire\" size=\"30\"></uni-icons>\r\n        <uni-icons class=\"more\" type=\"plus\" size=\"30\"></uni-icons>\r\n      </template>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\n  import {\r\n    ref,\r\n    onMounted\r\n  } from 'vue';\r\n\r\n  const {\r\n    safeAreaInsets\r\n  } = uni.getSystemInfoSync()\r\n\r\n  // 获取路由参数\r\n  const friend = ref({\r\n    id: 1,\r\n    name: '小美',\r\n    avatar: '/static/lyt4.jpg',\r\n  });\r\n  const self = ref({\r\n    name: '帅哥',\r\n    avatar: '/static/pyy.jpeg',\r\n  });\r\n  const goBack = () => {\r\n    uni.navigateBack()\r\n  }\r\n  // 消息列表\r\n  const messages = ref([{\r\n      content: '你好呀！',\r\n      isSelf: false\r\n    },\r\n    {\r\n      content: '你好，我是彭于晏。',\r\n      isSelf: true\r\n    },\r\n  ]);\r\n\r\n  // 输入框内容\r\n  const messageToSend = ref('');\r\n\r\n  const toggle = ref(false);\r\n\r\n  const id = ref(messages.value[messages.value.length - 1].id);\r\n\r\n  function onComfirm() {\r\n    messages.value.push({\r\n      id: ++id.value,\r\n      content: messageToSend.value,\r\n      isSelf: true\r\n    })\r\n    messageToSend.value = '';\r\n  }\r\n\r\n  function onFocus() {\r\n    toggle.value = true;\r\n  }\r\n\r\n  function onBlur() {\r\n    toggle.value = false;\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .chat-window {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n    position: relative;\r\n\r\n    .header {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      height: 90rpx;\r\n      background: #fff;\r\n      display: flex;\r\n      align-items: center;\r\n      border-bottom: 1px solid #eee;\r\n      z-index: 2;\r\n\r\n      /* 返回图标 */\r\n      .back-icon {\r\n        margin-left: 30rpx;\r\n        /* 距离左边界的距离 */\r\n      }\r\n\r\n      /* 好友名字 */\r\n      .friend-name {\r\n        flex: 1;\r\n        /* 占据剩余空间 */\r\n        text-align: center;\r\n        /* 文字居中 */\r\n        font-size: 34rpx;\r\n        font-weight: 500;\r\n        color: #333;\r\n        padding-right: 60rpx;\r\n        /* 避免文字被返回图标挤压 */\r\n      }\r\n    }\r\n\r\n    .message-list {\r\n      padding-top: 200rpx;\r\n      /* 为导航栏留出空间 */\r\n      padding-bottom: 60rpx;\r\n      /* 为输入框留出空间 */\r\n      flex: 1;\r\n\r\n      .message-item {\r\n        margin: 20rpx;\r\n        padding: 10rpx 0;\r\n\r\n        .message-friend {\r\n          display: flex;\r\n          flex-direction: row;\r\n\r\n          .avatar-friend {\r\n            width: 80rpx;\r\n            height: 80rpx;\r\n            border-radius: 40rpx;\r\n            margin-left: 20rpx;\r\n          }\r\n\r\n          .message-content-friend-text {\r\n            max-width: 80%;\r\n            padding: 8rpx 16rpx;\r\n            margin-left: 25rpx;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            background-color: #fff;\r\n            border-radius: 30rpx;\r\n            color: #000;\r\n          }\r\n        }\r\n\r\n        .message-self {\r\n          display: flex;\r\n          flex-direction: row-reverse;\r\n\r\n          .avatar-self {\r\n            width: 80rpx;\r\n            height: 80rpx;\r\n            border-radius: 40rpx;\r\n            margin-right: 20rpx;\r\n          }\r\n\r\n          .message-content-self-text {\r\n            max-width: 80%;\r\n            padding: 8rpx 16rpx;\r\n            margin-right: 25rpx;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            background-color: #2d65f7;\r\n            border-radius: 30rpx;\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .input-container {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 20rpx 0;\r\n      background: rgba(255, 255, 255, 0.8);\r\n      padding-bottom: 35rpx;\r\n\r\n      .input-box {\r\n        flex: 1;\r\n        height: 60rpx;\r\n        padding: 16rpx;\r\n        padding-bottom: 0rpx;\r\n        border: 2.5rpx solid black;\r\n        border-radius: 40rpx;\r\n        margin: 0 30rpx;\r\n        background: rgba(255, 255, 255, 0.5);\r\n      }\r\n\r\n      .emoji,\r\n      .more {\r\n        width: 50rpx;\r\n        height: 50rpx;\r\n        margin-right: 20rpx;\r\n      }\r\n\r\n      .send {\r\n        margin-right: 30rpx;\r\n        background-color: aqua;\r\n      }\r\n    }\r\n  }\r\n</style>","import MiniProgramPage from 'E:/program/FrontEnd/uni/uyub/pages/message/chat-window.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref"],"mappings":";;;;;;;;;;;;;AAqDE,UAAM;AAAA,MACJ;AAAA,IACJ,IAAMA,cAAAA,MAAI,kBAAmB;AAG3B,UAAM,SAASC,cAAAA,IAAI;AAAA,MACjB,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ;AAAA,IACZ,CAAG;AACD,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,MAAM;AAAA,MACN,QAAQ;AAAA,IACZ,CAAG;AACD,UAAM,SAAS,MAAM;AACnBD,oBAAAA,MAAI,aAAc;AAAA,IACnB;AAED,UAAM,WAAWC,cAAAA,IAAI;AAAA,MAAC;AAAA,QAClB,SAAS;AAAA,QACT,QAAQ;AAAA,MACT;AAAA,MACD;AAAA,QACE,SAAS;AAAA,QACT,QAAQ;AAAA,MACT;AAAA,IACL,CAAG;AAGD,UAAM,gBAAgBA,kBAAI,EAAE;AAE5B,UAAM,SAASA,kBAAI,KAAK;AAExB,UAAM,KAAKA,cAAAA,IAAI,SAAS,MAAM,SAAS,MAAM,SAAS,CAAC,EAAE,EAAE;AAE3D,aAAS,YAAY;AACnB,eAAS,MAAM,KAAK;AAAA,QAClB,IAAI,EAAE,GAAG;AAAA,QACT,SAAS,cAAc;AAAA,QACvB,QAAQ;AAAA,MACd,CAAK;AACD,oBAAc,QAAQ;AAAA,IACvB;AAED,aAAS,UAAU;AACjB,aAAO,QAAQ;AAAA,IAChB;AAED,aAAS,SAAS;AAChB,aAAO,QAAQ;AAAA,IAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtGH,GAAG,WAAW,eAAe;"}