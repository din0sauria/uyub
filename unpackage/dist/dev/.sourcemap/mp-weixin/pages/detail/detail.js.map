{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n  <!-- 轮播图 -->\r\n  <swiper class=\"swiper\" autoplay circular>\r\n    <swiper-item v-for=\"(image, index) in (activity.images||activityex.images)\" :key=\"index\">\r\n      <image :src=\"image\" mode=\"aspectFill\" style=\"width: 100%;\"></image>\r\n    </swiper-item>\r\n  </swiper>\r\n  <view class=\"detail-container\">\r\n\r\n    <!-- 活动价格 -->\r\n    <view class=\"price\">{{ activity.price }}</view>\r\n\r\n    <!-- 活动标题 -->\r\n    <view class=\"title\">{{ activity.title }}</view>\r\n\r\n    <!-- 活动地址 -->\r\n    <view class=\"address\"><uni-icons type=\"location\" color=\"#fff\"></uni-icons>&emsp;{{ activity.address }}</view>\r\n    <view class=\"detailAddress\"><uni-icons type=\"map\" color=\"#fff\"></uni-icons>&emsp;{{ activity.detailAddress }}</view>\r\n    <view class=\"divider\"></view> <!-- 模拟 <hr> -->\r\n    <!-- 活动时间 -->\r\n    <view class=\"time\"><text style=\"color: gray;\">活动时间&emsp;</text>{{ activity.date }} {{ activity.time }}</view>\r\n    <!-- 活动水平 -->\r\n    <view class=\"tags\"><text style=\"color: gray;\">活动水平&emsp;</text><view class=\"card-tags\">{{ activity.tags }}</view></view>\r\n\r\n  </view>\r\n  <!-- 活动状态 -->\r\n  <view class=\"signUpinfo\">\r\n    <view class=\"status\"> {{ activity.status }}&emsp;( {{ activity.participants }} /\r\n      {{ activity.plan }} )\r\n    </view>\r\n\r\n    <!-- 渲染头像 -->\r\n    <view class=\"avatar-list\">\r\n      <view v-for=\"(avatar, index) in displayedAvatars\" :key=\"index\" class=\"avatar-item\">\r\n        <image :src=\"avatar\" mode=\"aspectFill\" class=\"avatar-image\" />\r\n      </view>\r\n      <!-- 如果头像超过 8 个，显示 more-filled 图标 -->\r\n      <uni-icons type=\"more-filled\" size=\"24\"  />\r\n    </view>\r\n  </view>\r\n    <!-- 组织方 -->\r\n  <view class=\"author\">\r\n    <view>组织方</view>\r\n    <view class=\"author-info\">\r\n      <image :src=\"activity.authorAvatar||activityex.authorAvatar\" mode=\"aspectFill\" class=\"author-avatar\" />\r\n      <text class=\"author-name\">{{ activity.author|| activityex.author}}</text>\r\n  </view>\r\n  </view>\r\n  \r\n\r\n  <!-- 活动介绍 -->\r\n  <view class=\"intro\"><view>活动介绍</view>\r\n  <view class=\"description\" style=\"white-space:pre-line;\">{{ activity.description||activityex.description }}</view>\r\n    \r\n  </view>\r\n  \r\n  <br>\r\n  <br>\r\n  <br>\r\n\r\n  <!-- 报名按钮 -->\r\n  <view class=\"button-container\">\r\n  <button class=\"button\" @click=\"handleSignUp\">立即报名</button>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\n  import {\r\n    ref,\r\n    computed,\r\n    onMounted\r\n  } from 'vue';\r\n  import {\r\n    onLoad\r\n  } from '@dcloudio/uni-app';\r\n\r\n  const activity = ref({\r\n    id: 1,\r\n    title: '幸福林带冠深酷动力羽毛球馆',\r\n    price: '¥60',\r\n    address: '幸福林带冠深酷动力羽毛球馆',\r\n    detailAddress: '陕西省西安市新城区陕健康昆仑医院东南幸福林带冠深酷动力羽毛球馆',\r\n    date: '02月07日 周五',\r\n    time: '19:00-22:00',\r\n    status: '正在报名',\r\n    participants: 9,\r\n    plan: 10,\r\n    tags: '不限',\r\n    description: `人满可以报名等位，等位人数够4人会＋场地，加不上也会退费。\n免责声明:心脏病、高血压不宜打球，酒后严禁打球；如受伤或突发疾病本群不承担任何责任，报名视为同意声明。`,\r\n    images: [\"/static/dinoundertreezoom.png\", \"/static/dinoonsea.png\"],\r\n    author:'羽动生活俱乐部',\r\n    avatars : [\r\n      '/static/c1.png',\r\n      '/static/c2.png',\r\n      '/static/c3.png',\r\n      '/static/c4.png',\r\n      '/static/c5.png',\r\n      '/static/c6.png',\r\n      '/static/c7.png',\r\n      '/static/c8.png',\r\n      '/static/c9.png', // 超过 8 个\r\n    ],\r\n    authorAvatar:'/static/dinohead.png'\r\n    \r\n  });\r\n  const activityex=activity.value;\r\n\r\n  // 获取活动详情\r\n  // const fetchActivityDetail = async (id) => {\r\n  //   try {\r\n  //     const res = await uni.request({\r\n  //       url: `https://your-api-endpoint/activities/${id}`, // 后端接口\r\n  //       method: 'GET'\r\n  //     });\r\n  //     activity.value = res.data; // 后端返回的数据\r\n  //   } catch (error) {\r\n  //     uni.showToast({\r\n  //       title: '获取活动详情失败',\r\n  //       icon: 'error'\r\n  //     });\r\n  //   }\r\n  // };\r\n  import activities from '/static/detail.js';\r\n\r\n  const fetchActivityDetail = async (activityId) => {\r\n    try {\r\n      for (const res of activities) {\r\n        // 如果活动 ID 匹配，则赋值给 activity 并返回\r\n        if (res.id == activityId) {\r\n          activity.value = res; // 找到匹配的活动，赋值给 activity\r\n          return; // 找到后直接返回，避免继续循环\r\n        }\r\n      }\r\n      // 如果没有找到匹配的活动，抛出错误\r\n      console.log(activityId)\r\n      throw new Error('活动未找到');\r\n    } catch (error) {\r\n      uni.showToast({\r\n        title: '获取活动详情失败',\r\n        icon: 'error'\r\n      });\r\n      console.error(error); // 在控制台打印错误信息，方便调试\r\n    }\r\n  };\r\n\r\n  // 页面加载时获取活动 ID 并请求数据\r\n  onLoad((options) => {\r\n    const activityId = options.id; // 从 URL 参数中获取活动 ID\r\n    fetchActivityDetail(activityId);\r\n  });\r\n\r\n  // 报名按钮点击事件\r\n  const handleSignUp = () => {\r\n    uni.showToast({\r\n      title: '报名成功',\r\n      icon: 'success'\r\n    });\r\n  };\r\n\r\n  // 计算属性：只显示前 8 个头像\r\n  const displayedAvatars = computed(() => {\r\n    return activity.value.avatars.slice(0, 8);\r\n  });\r\n\r\n  // 计算属性：判断是否还有更多头像\r\n  const hasMore = computed(() => {\r\n    return displayedAvatars.value.avatars.length > 8;\r\n  });\r\n</script>\r\n\r\n<style scoped>\r\n  .detail-container {\r\n    background-color: #333;\r\n    padding: 20rpx 40rpx;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    height: 400rpx;\r\n    font-size: 28rpx;\r\n    color: #eee;\r\n  }\r\n\r\n  .swiper {\r\n    height: 400rpx;\r\n  }\r\n\r\n  .price {\r\n    position: absolute;\r\n    top: 330rpx;\r\n    right: 0;\r\n    font-size: 60rpx;\r\n    color: gold;\r\n    margin-top: 10rpx;\r\n    background-color: #333;\r\n    padding: 20rpx;\r\n    width: 200rpx;\r\n    border-radius: 50rpx 0;\r\n    text-align: center;\r\n  }\r\n\r\n  .title {\r\n    font-size: 40rpx;\r\n    font-weight: bold;\r\n    margin-top: 20rpx;\r\n    color: #fff;\r\n  }\r\n  .tags{\r\n    display: flex;\r\n    height: 40rpx;\r\n    padding: 0;\r\n  }\r\n  .card-tags{\r\n    color: #007AFF;\r\n    background-color: #aaffff;\r\n    border-radius: 5px;\r\n    line-height: 20px;\r\n    width: 100rpx;\r\n    height: 40rpx;\r\n    text-align: center;\r\n    display:block\r\n  }\r\n  .divider{\r\n    border: #eee 1rpx dotted;\r\n  }\r\n\r\n\r\n  .signUpinfo {\r\n    background-color: #fff;\r\n    height: 100rpx;\r\n    border-radius: 20rpx;\r\n    margin: 20rpx;\r\n    padding: 30rpx;\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    height: 130rpx;\r\n  }\r\n\r\n  .avatar-list {\r\n    margin-top: 30rpx;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .avatar-item{\r\n    width: 50rpx;\r\n    height: 50rpx;\r\n    border-radius: 50%;\r\n    margin-right: 10rpx;\r\n  }\r\n\r\n  .avatar-image {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .author{\r\n    background-color: #fff;\r\n    height: 100rpx;\r\n    border-radius: 20rpx;\r\n    margin: 20rpx;\r\n    padding: 30rpx;\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    height: 150rpx;\r\n  }\r\n  .author-avatar{\r\n    width: 80rpx;\r\n    height: 80rpx;\r\n    border-radius: 50%;\r\n  }\r\n  .author-info{\r\n    margin: 20rpx;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .author-name{\r\n    margin-left: 40rpx;\r\n    font-size: 36rpx;\r\n    font-weight: normal;\r\n  }\r\n\r\n  .intro {\r\n    background-color: #fff;\r\n    border-radius: 20rpx;\r\n    margin: 20rpx;\r\n    padding: 30rpx;\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n  }\r\n  .description{\r\n    font-weight: normal;\r\n    margin-top: 10px;\r\n  }\r\n  .button-container{\r\n    position: fixed;\r\n    bottom: 0;\r\n    background-color: #fff;\r\n    width: 100%;\r\n    height: 120rpx;\r\n  }\r\n\r\n  .button {\r\n    width: 80%;\r\n    margin: 10rpx auto;\r\n    height: 100rpx;\r\n    background-color: #55ffff;\r\n    color: #000;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    border-radius: 50rpx;\r\n    line-height: 100rpx;\r\n  }\r\n  .button::after {\r\n    border: none;\r\n  }\r\n</style>","import MiniProgramPage from 'E:/program/FrontEnd/uni/uyub/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","activities","uni","onLoad","computed"],"mappings":";;;;;;;;;;;;;;AA4EE,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,OAAO;AAAA,MACP,SAAS;AAAA,MACT,eAAe;AAAA,MACf,MAAM;AAAA,MACN,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA;AAAA,MAEb,QAAQ,CAAC,iCAAiC,uBAAuB;AAAA,MACjE,QAAO;AAAA,MACP,SAAU;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;AAAA,MACD;AAAA,MACD,cAAa;AAAA,IAEjB,CAAG;AACD,UAAM,aAAW,SAAS;AAmB1B,UAAM,sBAAsB,OAAO,eAAe;AAChD,UAAI;AACF,mBAAW,OAAOC,0BAAY;AAE5B,cAAI,IAAI,MAAM,YAAY;AACxB,qBAAS,QAAQ;AACjB;AAAA,UACD;AAAA,QACF;AAEDC,sBAAAA,qDAAY,UAAU;AACtB,cAAM,IAAI,MAAM,OAAO;AAAA,MACxB,SAAQ,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACd,CAAO;AACDA,sBAAAA,MAAc,MAAA,SAAA,kCAAA,KAAK;AAAA,MACpB;AAAA,IACL;AAGEC,kBAAM,OAAC,CAAC,YAAY;AAClB,YAAM,aAAa,QAAQ;AAC3B,0BAAoB,UAAU;AAAA,IAClC,CAAG;AAGD,UAAM,eAAe,MAAM;AACzBD,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACZ,CAAK;AAAA,IACL;AAGE,UAAM,mBAAmBE,cAAAA,SAAS,MAAM;AACtC,aAAO,SAAS,MAAM,QAAQ,MAAM,GAAG,CAAC;AAAA,IAC5C,CAAG;AAGeA,kBAAAA,SAAS,MAAM;AAC7B,aAAO,iBAAiB,MAAM,QAAQ,SAAS;AAAA,IACnD,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvKH,GAAG,WAAW,eAAe;"}