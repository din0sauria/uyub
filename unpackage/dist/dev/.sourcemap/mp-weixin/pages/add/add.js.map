{"version":3,"file":"add.js","sources":["pages/add/add.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkL2FkZC52dWU"],"sourcesContent":["<template>\n  <view>\n    <view class=\"container\">\n      <view class=\"input-container\">\n        <view class=\"input-item\">\n          <text class=\"input-label\">帖子标题：</text>\n          <input type=\"text\" v-model=\"post.title\" class=\"input-field\" placeholder=\"请输入帖子标题\" />\n        </view>\n        <view class=\"input-item\">\n          <text class=\"input-label\">帖子内容：</text>\n          <textarea v-model=\"post.content\" class=\"input-field\" placeholder=\"请输入帖子内容\"></textarea>\n        </view>\n        <view class=\"input-item\">\n          <text class=\"input-label\">选择图片：</text>\n          <button @click=\"chooseImage\">上传图片</button>\n          <!--          <image v-if=\"post.image\" :src=\"post.image\" class=\"post-image\" mode=\"aspectFill\" /> -->\n        </view>\n        <view class=\"image-container\">\n          <view v-for=\"(image, index) in images\" :key=\"index\" class=\"image-item\">\n            <image :src=\"image\" mode=\"aspectFit\" class=\"image-src\"></image>\n          </view>\n        </view>\n        <view class=\"input-item\">\n          <text class=\"input-label\">选择分类：</text>\n          <!-- <picker mode=\"selector\" :range=\"classification\" v-model=\"selectedCategoryIndex\" @change=\"categoryChange\">\n            <view class=\"picker\">当前选择：{{ classification[selectedCategoryIndex] }}</view>\n          </picker> -->\n        </view>\n      </view>\n      <view class=\"button-container\">\n        <button @click=\"publishPost\">发布帖子</button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      images: [], // 存储已上传图片的数组\n      post: {\n        title: '',\n        content: '',\n        images: '', // 存储已上传图片的数组\n        classification: ''\n      },\n      classification: ['分类1', '分类2', '分类3', '分类4'],\n      selectedCategoryIndex: 0\n    };\n  },\n  methods: {\n    //选择图片进行上传\n    chooseImage() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          const tempFilePaths = res.tempFilePaths;\n          this.images.push(tempFilePaths[0]);\n        }\n      });\n    },\n    //选择分类\n    categoryChange(e) {\n      this.selectedCategoryIndex = e.detail.value;\n    },\n    //发布帖子\n    async publishPost() {\n      this.post.classification = this.classification[this.selectedCategoryIndex];\n      this.post.images = this.images.join(',');\n      console.log(this.post.categorie);\n      if (!this.post.title || !this.post.content || !this.post.images || !this.post.classification) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        });\n        return;\n      }\n      const res = await this.$myRequest({\n        method: 'post',\n        url: '/fatie',\n        data: {\n          title: this.post.title,\n          content: this.post.content,\n          images: this.post.images,\n          classification: this.post.classification,\n          userId: this.$store.state.user.id,\n          communityId: this.$store.state.communityId\n        }\n      });\n      uni.showToast({\n        title: '发布成功',\n        icon: 'success'\n      });\n    }\n  }\n};\n</script>\n","import MiniProgramPage from 'E:/program/FrontEnd/uni/uyub/pages/add/add.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAqCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,QAAQ,CAAE;AAAA;AAAA,MACV,MAAM;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,QACR,gBAAgB;AAAA,MACjB;AAAA,MACD,gBAAgB,CAAC,OAAO,OAAO,OAAO,KAAK;AAAA,MAC3C,uBAAuB;AAAA;EAE1B;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,cAAc;AACZA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY,YAAY;AAAA,QACnC,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,gBAAM,gBAAgB,IAAI;AAC1B,eAAK,OAAO,KAAK,cAAc,CAAC,CAAC;AAAA,QACnC;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAED,eAAe,GAAG;AAChB,WAAK,wBAAwB,EAAE,OAAO;AAAA,IACvC;AAAA;AAAA,IAED,MAAM,cAAc;AAClB,WAAK,KAAK,iBAAiB,KAAK,eAAe,KAAK,qBAAqB;AACzE,WAAK,KAAK,SAAS,KAAK,OAAO,KAAK,GAAG;AACvCA,oBAAY,MAAA,MAAA,OAAA,2BAAA,KAAK,KAAK,SAAS;AAC/B,UAAI,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,KAAK,WAAW,CAAC,KAAK,KAAK,UAAU,CAAC,KAAK,KAAK,gBAAgB;AAC5FA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AACY,YAAM,KAAK,WAAW;AAAA,QAChC,QAAQ;AAAA,QACR,KAAK;AAAA,QACL,MAAM;AAAA,UACJ,OAAO,KAAK,KAAK;AAAA,UACjB,SAAS,KAAK,KAAK;AAAA,UACnB,QAAQ,KAAK,KAAK;AAAA,UAClB,gBAAgB,KAAK,KAAK;AAAA,UAC1B,QAAQ,KAAK,OAAO,MAAM,KAAK;AAAA,UAC/B,aAAa,KAAK,OAAO,MAAM;AAAA,QACjC;AAAA,MACF,CAAC;AACDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;ACjGA,GAAG,WAAW,eAAe;"}